<!DOCTYPE html>
<html>
    <head>
		<title>
			Modular arithmetic speculator
		</title>
		<meta charset="utf-8">
		<style>
			body, input, button {
				font-size: 14pt;
				font-family: 'Segoe UI';
			}
		</style>
	</head>
	<body>
		Constant: <input style="width: 20%;" id="const"/> Bad periods: <input style="width: 35%;" id="periods"/> Bad values: <input style="width: 35%;" id="values"/> <button onclick="speculate(document.getElementById('const').value, document.getElementById('periods').value, document.getElementById('values').value);">Speculate</button>
	</body>
	<script>
		function baseconv(val,base,mult) {
			var number = val;
			var list = [val];
			var mult = mult ? mult : 1n;
			while(list[list.length - 1] != 0n) {
				list.push(list[list.length - 1] / BigInt(base));
				list[list.length - 2] = list[list.length - 2] % BigInt(base);
			}
			for(let term = 0; term < list.length; term++) {
				list[term] *= mult ** BigInt(term);
			}
			return list;
		}
		function mod_pow(b,p,m) {
		    var c = 1n;
		    var l = baseconv(p,2n).reverse();
		    for(let i = 0n; i < l.length; i++) {
		        if(l[i] == 1n) {
		            c *= b;
		        }
		        c %= m;
		        if(l[i + 1n] != undefined) {
		            c **= 2n;
		        }
		    }
		    return c;
		}
		function period(x) {
		    while(x % 2n == 0n) {
		        x /= 2n;
		    }
		    while(x % 5n == 0n) {
		        x /= 5n;
		    }
		    if(x == 1n) {
		        return 0n;
		    }
		    var mod = 1n;
		    var iter = 0n;
		    while(iter == 0n || mod != 1n) {
		        iter++;
		        mod *= 10n;
		        mod %= x;
		    }
		    return iter;
		}
		function twos(h) {
			var two = 0;
			var x = h - 1n;
		    while(x % 2n == 0n) {
		        x /= 2n;
		    }
			while(mod_pow(10n, x, h) != 1n) {
				x *= 2n;
				two++;
			}
		    return two;
		}
		function divs(x) {
		    var d = 5n;
		    var dive = 0;
		    while(d < x) {
		        d += 2n;
		        if(x % d == 0n && 2n ** (d - 1n) % d <= 1n && 3n ** (d - 1n) % d <= 1n && 5n ** (d - 1n) % d <= 1n && 7n ** (d - 1n) % d <= 1n && 11n ** (d - 1n) % d <= 1n && 13n ** (d - 1n) % d <= 1n && 17n ** (d - 1n) % d <= 1n && 19n ** (d - 1n) % d <= 1n) {
		            dive++;
		        }
		    }
		    return dive;
		}
		function speculate(c, p, v) {
			document.body.innerHTML = "";
			var render = [];
			var n = 0n;
			var a = 2n;
			var k = BigInt(c);
			setInterval(function() {
			    n += 1n;
			    while(mod_pow(10n, k * a * n, k * a * n + 1n) != 1n) {
			        n++;
			    }
			    if(mod_pow(10n, k * a * n, k * a * n + 1n) == 1n && !v.includes(k * a * n + 1n)) {
			        document.body.innerHTML += (a * n + 1n) + " â†’ " + (a * k * n + 1n) + " " + twos(a * k * n + 1n) + " p " + period(n) + " c " + divs(n) + "<br/>";
			    }
			},250)
		}
	</script>
</html>
